***************
*** 341,346 ****
    }
  
    if (file_entity_file_is_local($file) && isset($file->image_dimensions)) {
      if (!empty($display['settings']['image_style'])) {
        $element = array(
          '#theme' => 'image_style',
--- 354,366 ----
    }
  
    if (file_entity_file_is_local($file) && isset($file->image_dimensions)) {
+     // We don't sanitize here.
+     // @see http://drupal.org/node/1553094#comment-6257382
+     // Theme function will take care of escaping.
+     $replace_options = array(
+       'clear' => 1,
+       'sanitize' => 0,
+     );
      if (!empty($display['settings']['image_style'])) {
        $element = array(
          '#theme' => 'image_style',
***************
*** 348,353 ****
          '#path' => $file->uri,
          '#width' => $file->image_dimensions['width'],
          '#height' => $file->image_dimensions['height'],
        );
      }
      else {
--- 368,375 ----
          '#path' => $file->uri,
          '#width' => $file->image_dimensions['width'],
          '#height' => $file->image_dimensions['height'],
+         '#alt' => token_replace($display['settings']['alt'], array('file' => $file), $replace_options),
+         '#title' => token_replace($display['settings']['title'], array('file' => $file), $replace_options),
        );
      }
      else {
***************
*** 356,361 ****
          '#path' => $file->uri,
          '#width' => $file->image_dimensions['width'],
          '#height' => $file->image_dimensions['height'],
        );
      }
      return $element;
--- 378,385 ----
          '#path' => $file->uri,
          '#width' => $file->image_dimensions['width'],
          '#height' => $file->image_dimensions['height'],
+         '#alt' => token_replace($display['settings']['alt'], array('file' => $file), $replace_options),
+         '#title' => token_replace($display['settings']['title'], array('file' => $file), $replace_options),
        );
      }
      return $element;
